const api={get:i=>fetch(i).then(m=>m.ok?m.json():Promise.reject(m)),post:(i,m)=>fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}).then(a=>a.ok?a.json():Promise.reject(a)),put:(i,m)=>fetch(i,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}).then(a=>a.ok?a.json():Promise.reject(a)),del:i=>fetch(i,{method:"DELETE"})};function StatusBadge({status:i}){const m=(i||"").replace(/_/g," ");return React.createElement("span",{className:`badge badge-${i}`},m)}function Sidebar({page:i,setPage:m}){const{Nav:a}=ReactBootstrap;return React.createElement("div",{className:"sidebar"},React.createElement("div",{className:"sidebar-heading"},"Navigation"),React.createElement(a,{className:"flex-column"},[{key:"dashboard",icon:"fa-tachometer-alt",label:"Dashboard"},{key:"units",icon:"fa-building",label:"Units"},{key:"residents",icon:"fa-users",label:"Residents"},{key:"board",icon:"fa-user-tie",label:"Board"},{key:"announcements",icon:"fa-bullhorn",label:"Announcements"},{key:"maintenance",icon:"fa-wrench",label:"Maintenance"},{key:"finances",icon:"fa-dollar-sign",label:"Finances"},{key:"staff",icon:"fa-hard-hat",label:"Staff & Vendors"},{key:"applications",icon:"fa-file-alt",label:"Applications"},{key:"compliance",icon:"fa-clipboard-check",label:"Compliance"}].map(t=>React.createElement(a.Link,{key:t.key,className:i===t.key?"active":"",onClick:()=>m(t.key)},React.createElement("i",{className:`fas ${t.icon}`})," ",t.label))))}function DashboardPage(){const{Row:i,Col:m,Card:a,Table:s}=ReactBootstrap,[t,p]=React.useState(null),[e,f]=React.useState([]),[y,B]=React.useState([]),[F,g]=React.useState([]);React.useEffect(()=>{api.get("/api/building").then(p).catch(()=>{}),api.get("/api/units").then(f),api.get("/api/announcements").then(B),api.get("/api/maintenance").then(g)},[]);const C=e.reduce((l,r)=>l+(r.shares||0),0),n=e.reduce((l,r)=>l+parseFloat(r.monthly_maintenance||0),0),h=F.filter(l=>l.status==="open"||l.status==="in_progress").length;return React.createElement("div",null,React.createElement("h4",{className:"mb-3"},t?t.name:"Building Dashboard"),t&&React.createElement("p",{className:"text-muted"},t.address,", ",t.city,", ",t.state," ",t.zip," \xB7 Built ",t.year_built," \xB7"," ",(t.building_type||"").toUpperCase()),React.createElement(i,{className:"mb-4"},React.createElement(m,{md:3},React.createElement(a,{className:"stat-card"},React.createElement(a.Body,null,React.createElement("div",{className:"stat-number text-primary"},e.length),React.createElement("div",{className:"stat-label"},"Units")))),React.createElement(m,{md:3},React.createElement(a,{className:"stat-card"},React.createElement(a.Body,null,React.createElement("div",{className:"stat-number text-info"},C.toLocaleString()),React.createElement("div",{className:"stat-label"},"Total Shares")))),React.createElement(m,{md:3},React.createElement(a,{className:"stat-card"},React.createElement(a.Body,null,React.createElement("div",{className:"stat-number text-success"},"$",n.toLocaleString()),React.createElement("div",{className:"stat-label"},"Monthly Revenue")))),React.createElement(m,{md:3},React.createElement(a,{className:"stat-card"},React.createElement(a.Body,null,React.createElement("div",{className:"stat-number text-warning"},h),React.createElement("div",{className:"stat-label"},"Open Requests"))))),React.createElement(i,null,React.createElement(m,{md:8},React.createElement(a,{className:"table-card mb-3"},React.createElement(a.Header,null,React.createElement("i",{className:"fas fa-bullhorn mr-2"}),"Recent Announcements"),React.createElement(a.Body,null,y.length===0&&React.createElement("p",{className:"text-muted mb-0"},"No announcements"),y.slice(0,5).map(l=>React.createElement("div",{key:l.id,className:`announcement-card p-3 category-${l.category||"general"}`},React.createElement("strong",null,l.title),React.createElement("div",{className:"text-muted small"},l.first_name," ",l.last_name," \xB7"," ",new Date(l.posted_at).toLocaleDateString()),React.createElement("div",{className:"mt-1"},l.body)))))),React.createElement(m,{md:4},React.createElement(a,{className:"table-card mb-3"},React.createElement(a.Header,null,React.createElement("i",{className:"fas fa-wrench mr-2"}),"Open Requests"),React.createElement(a.Body,{className:"p-0"},React.createElement(s,{size:"sm",hover:!0},React.createElement("tbody",null,F.filter(l=>l.status!=="closed"&&l.status!=="resolved").slice(0,8).map(l=>React.createElement("tr",{key:l.id},React.createElement("td",{className:"pl-3"},l.title,React.createElement("br",null),React.createElement("small",{className:"text-muted"},l.unit_number||"Common area")),React.createElement("td",null,React.createElement(StatusBadge,{status:l.status}),React.createElement("br",null),React.createElement("small",{className:`priority-${l.priority}`},l.priority)))))))))))}function UnitsPage(){const{Card:i,Table:m,Button:a,Modal:s,Form:t,Row:p,Col:e}=ReactBootstrap,[f,y]=React.useState([]),[B,F]=React.useState(!1),[g,C]=React.useState({}),n=()=>api.get("/api/units").then(y);React.useEffect(()=>{n()},[]);const h=()=>{api.post("/api/units",g).then(()=>{F(!1),C({}),n()})},l=r=>api.del(`/api/units/${r}`).then(n);return React.createElement("div",null,React.createElement("div",{className:"d-flex justify-content-between mb-3"},React.createElement("h4",null,"Units"),React.createElement(a,{size:"sm",onClick:()=>F(!0)},React.createElement("i",{className:"fas fa-plus mr-1"})," Add Unit")),React.createElement(i,{className:"table-card"},React.createElement(m,{hover:!0,responsive:!0},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Unit"),React.createElement("th",null,"Floor"),React.createElement("th",null,"Rooms"),React.createElement("th",null,"Sq Ft"),React.createElement("th",null,"Shares"),React.createElement("th",null,"Maintenance"),React.createElement("th",null,"Status"),React.createElement("th",null))),React.createElement("tbody",null,f.map(r=>React.createElement("tr",{key:r.id},React.createElement("td",null,React.createElement("strong",null,r.unit_number)),React.createElement("td",null,r.floor),React.createElement("td",null,r.rooms),React.createElement("td",null,r.square_feet?r.square_feet.toLocaleString():"-"),React.createElement("td",null,r.shares),React.createElement("td",null,"$",parseFloat(r.monthly_maintenance||0).toLocaleString()),React.createElement("td",null,React.createElement(StatusBadge,{status:r.status})),React.createElement("td",null,React.createElement(a,{size:"sm",variant:"outline-danger",onClick:()=>l(r.id)},React.createElement("i",{className:"fas fa-trash"})))))))),React.createElement(s,{show:B,onHide:()=>F(!1)},React.createElement(s.Header,{closeButton:!0},React.createElement(s.Title,null,"Add Unit")),React.createElement(s.Body,null,React.createElement(p,null,React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Unit #"),React.createElement(t.Control,{value:g.unit_number||"",onChange:r=>C({...g,unit_number:r.target.value})}))),React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Floor"),React.createElement(t.Control,{type:"number",value:g.floor||"",onChange:r=>C({...g,floor:parseInt(r.target.value)})})))),React.createElement(p,null,React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Rooms"),React.createElement(t.Control,{type:"number",step:"0.5",value:g.rooms||"",onChange:r=>C({...g,rooms:parseFloat(r.target.value)})}))),React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Sq Ft"),React.createElement(t.Control,{type:"number",value:g.square_feet||"",onChange:r=>C({...g,square_feet:parseInt(r.target.value)})})))),React.createElement(p,null,React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Shares"),React.createElement(t.Control,{type:"number",value:g.shares||"",onChange:r=>C({...g,shares:parseInt(r.target.value)})}))),React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Monthly Maint."),React.createElement(t.Control,{type:"number",step:"0.01",value:g.monthly_maintenance||"",onChange:r=>C({...g,monthly_maintenance:parseFloat(r.target.value)})}))))),React.createElement(s.Footer,null,React.createElement(a,{variant:"secondary",onClick:()=>F(!1)},"Cancel"),React.createElement(a,{onClick:h},"Save"))))}function ResidentsPage(){const{Card:i,Table:m,Button:a,Modal:s,Form:t,Row:p,Col:e}=ReactBootstrap,[f,y]=React.useState([]),[B,F]=React.useState([]),[g,C]=React.useState(!1),[n,h]=React.useState({}),l=()=>{api.get("/api/residents").then(y),api.get("/api/units").then(F)};React.useEffect(()=>{l()},[]);const r={};B.forEach(o=>{r[o.id]=o.unit_number});const d=()=>{api.post("/api/residents",n).then(()=>{C(!1),h({}),l()})},v=o=>api.del(`/api/residents/${o}`).then(l);return React.createElement("div",null,React.createElement("div",{className:"d-flex justify-content-between mb-3"},React.createElement("h4",null,"Residents Directory"),React.createElement(a,{size:"sm",onClick:()=>C(!0)},React.createElement("i",{className:"fas fa-plus mr-1"})," Add Resident")),React.createElement(i,{className:"table-card"},React.createElement(m,{hover:!0,responsive:!0},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Name"),React.createElement("th",null,"Unit"),React.createElement("th",null,"Role"),React.createElement("th",null,"Email"),React.createElement("th",null,"Phone"),React.createElement("th",null,"Shares"),React.createElement("th",null))),React.createElement("tbody",null,f.map(o=>React.createElement("tr",{key:o.id},React.createElement("td",null,React.createElement("strong",null,o.first_name," ",o.last_name),o.is_primary?React.createElement("small",{className:"text-muted ml-1"},"(primary)"):""),React.createElement("td",null,r[o.unit_id]||"-"),React.createElement("td",null,o.role),React.createElement("td",null,o.email),React.createElement("td",null,o.phone),React.createElement("td",null,o.shares_held),React.createElement("td",null,React.createElement(a,{size:"sm",variant:"outline-danger",onClick:()=>v(o.id)},React.createElement("i",{className:"fas fa-trash"})))))))),React.createElement(s,{show:g,onHide:()=>C(!1)},React.createElement(s.Header,{closeButton:!0},React.createElement(s.Title,null,"Add Resident")),React.createElement(s.Body,null,React.createElement(p,null,React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"First Name"),React.createElement(t.Control,{value:n.first_name||"",onChange:o=>h({...n,first_name:o.target.value})}))),React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Last Name"),React.createElement(t.Control,{value:n.last_name||"",onChange:o=>h({...n,last_name:o.target.value})})))),React.createElement(t.Group,null,React.createElement(t.Label,null,"Unit"),React.createElement(t.Control,{as:"select",value:n.unit_id||"",onChange:o=>h({...n,unit_id:o.target.value})},React.createElement("option",{value:""},"Select..."),B.map(o=>React.createElement("option",{key:o.id,value:o.id},o.unit_number)))),React.createElement(p,null,React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Email"),React.createElement(t.Control,{value:n.email||"",onChange:o=>h({...n,email:o.target.value})}))),React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Phone"),React.createElement(t.Control,{value:n.phone||"",onChange:o=>h({...n,phone:o.target.value})})))),React.createElement(p,null,React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Role"),React.createElement(t.Control,{as:"select",value:n.role||"shareholder",onChange:o=>h({...n,role:o.target.value})},React.createElement("option",null,"shareholder"),React.createElement("option",null,"subtenant"),React.createElement("option",null,"occupant")))),React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Shares"),React.createElement(t.Control,{type:"number",value:n.shares_held||"",onChange:o=>h({...n,shares_held:parseInt(o.target.value)})}))))),React.createElement(s.Footer,null,React.createElement(a,{variant:"secondary",onClick:()=>C(!1)},"Cancel"),React.createElement(a,{onClick:d},"Save"))))}function BoardPage(){const{Card:i,Table:m,Badge:a}=ReactBootstrap,[s,t]=React.useState([]);React.useEffect(()=>{api.get("/api/board").then(t)},[]);const p=e=>e.replace(/_/g," ").replace(/\b\w/g,f=>f.toUpperCase());return React.createElement("div",null,React.createElement("h4",{className:"mb-3"},"Board of Directors"),React.createElement(i,{className:"table-card"},React.createElement(m,{hover:!0,responsive:!0},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Name"),React.createElement("th",null,"Role"),React.createElement("th",null,"Email"),React.createElement("th",null,"Term"),React.createElement("th",null,"Status"))),React.createElement("tbody",null,s.map(e=>React.createElement("tr",{key:e.id},React.createElement("td",null,React.createElement("strong",null,e.first_name," ",e.last_name)),React.createElement("td",null,React.createElement(a,{variant:"info"},p(e.role))),React.createElement("td",null,e.email),React.createElement("td",null,e.term_start?new Date(e.term_start).toLocaleDateString():""," -"," ",e.term_end?new Date(e.term_end).toLocaleDateString():""),React.createElement("td",null,e.is_active?React.createElement(a,{variant:"success"},"Active"):React.createElement(a,{variant:"secondary"},"Inactive"))))))))}function AnnouncementsPage(){const{Card:i,Button:m,Modal:a,Form:s}=ReactBootstrap,[t,p]=React.useState([]),[e,f]=React.useState(!1),[y,B]=React.useState({}),F=()=>api.get("/api/announcements").then(p);React.useEffect(()=>{F()},[]);const g=()=>{api.post("/api/announcements",y).then(()=>{f(!1),B({}),F()})},C=n=>api.del(`/api/announcements/${n}`).then(F);return React.createElement("div",null,React.createElement("div",{className:"d-flex justify-content-between mb-3"},React.createElement("h4",null,"Announcements"),React.createElement(m,{size:"sm",onClick:()=>f(!0)},React.createElement("i",{className:"fas fa-plus mr-1"})," New Announcement")),t.map(n=>React.createElement(i,{key:n.id,className:`announcement-card p-3 category-${n.category||"general"}`},React.createElement("div",{className:"d-flex justify-content-between"},React.createElement("div",null,React.createElement("strong",null,n.title),React.createElement("div",{className:"text-muted small"},n.first_name," ",n.last_name," \xB7"," ",new Date(n.posted_at).toLocaleDateString()," \xB7"," ",n.category||"general")),React.createElement(m,{size:"sm",variant:"outline-danger",onClick:()=>C(n.id)},React.createElement("i",{className:"fas fa-trash"}))),React.createElement("div",{className:"mt-2"},n.body))),React.createElement(a,{show:e,onHide:()=>f(!1)},React.createElement(a.Header,{closeButton:!0},React.createElement(a.Title,null,"New Announcement")),React.createElement(a.Body,null,React.createElement(s.Group,null,React.createElement(s.Label,null,"Title"),React.createElement(s.Control,{value:y.title||"",onChange:n=>B({...y,title:n.target.value})})),React.createElement(s.Group,null,React.createElement(s.Label,null,"Category"),React.createElement(s.Control,{as:"select",value:y.category||"general",onChange:n=>B({...y,category:n.target.value})},React.createElement("option",null,"general"),React.createElement("option",null,"maintenance"),React.createElement("option",null,"meeting"),React.createElement("option",null,"emergency"))),React.createElement(s.Group,null,React.createElement(s.Label,null,"Message"),React.createElement(s.Control,{as:"textarea",rows:4,value:y.body||"",onChange:n=>B({...y,body:n.target.value})}))),React.createElement(a.Footer,null,React.createElement(m,{variant:"secondary",onClick:()=>f(!1)},"Cancel"),React.createElement(m,{onClick:g},"Post"))))}function MaintenancePage(){const{Card:i,Table:m,Button:a,Modal:s,Form:t,Row:p,Col:e}=ReactBootstrap,[f,y]=React.useState([]),[B,F]=React.useState([]),[g,C]=React.useState(!1),[n,h]=React.useState({}),[l,r]=React.useState("all"),d=()=>{api.get("/api/maintenance").then(y),api.get("/api/units").then(F)};React.useEffect(()=>{d()},[]);const v=l==="all"?f:f.filter(c=>c.status===l),o=()=>{api.post("/api/maintenance",n).then(()=>{C(!1),h({}),d()})},N=(c,b)=>{api.put(`/api/maintenance/${c}`,{status:b}).then(d)};return React.createElement("div",null,React.createElement("div",{className:"d-flex justify-content-between mb-3"},React.createElement("h4",null,"Maintenance Requests"),React.createElement(a,{size:"sm",onClick:()=>C(!0)},React.createElement("i",{className:"fas fa-plus mr-1"})," New Request")),React.createElement("div",{className:"mb-3"},["all","open","in_progress","resolved","closed"].map(c=>React.createElement(a,{key:c,size:"sm",variant:l===c?"primary":"outline-secondary",className:"mr-1",onClick:()=>r(c)},c==="all"?"All":c.replace(/_/g," ")))),React.createElement(i,{className:"table-card"},React.createElement(m,{hover:!0,responsive:!0},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Title"),React.createElement("th",null,"Unit"),React.createElement("th",null,"Location"),React.createElement("th",null,"Priority"),React.createElement("th",null,"Status"),React.createElement("th",null,"Assigned"),React.createElement("th",null,"Actions"))),React.createElement("tbody",null,v.map(c=>React.createElement("tr",{key:c.id},React.createElement("td",null,React.createElement("strong",null,c.title),React.createElement("br",null),React.createElement("small",{className:"text-muted"},c.first_name," ",c.last_name)),React.createElement("td",null,c.unit_number||"Common"),React.createElement("td",null,c.location),React.createElement("td",null,React.createElement("span",{className:`priority-${c.priority}`},c.priority)),React.createElement("td",null,React.createElement(StatusBadge,{status:c.status})),React.createElement("td",null,c.assigned_to||"-"),React.createElement("td",null,c.status==="open"&&React.createElement(a,{size:"sm",variant:"outline-warning",className:"mr-1",onClick:()=>N(c.id,"in_progress")},"Start"),c.status==="in_progress"&&React.createElement(a,{size:"sm",variant:"outline-success",onClick:()=>N(c.id,"resolved")},"Resolve"))))))),React.createElement(s,{show:g,onHide:()=>C(!1)},React.createElement(s.Header,{closeButton:!0},React.createElement(s.Title,null,"New Maintenance Request")),React.createElement(s.Body,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Title"),React.createElement(t.Control,{value:n.title||"",onChange:c=>h({...n,title:c.target.value})})),React.createElement(t.Group,null,React.createElement(t.Label,null,"Description"),React.createElement(t.Control,{as:"textarea",rows:3,value:n.description||"",onChange:c=>h({...n,description:c.target.value})})),React.createElement(p,null,React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Unit"),React.createElement(t.Control,{as:"select",value:n.unit_id||"",onChange:c=>h({...n,unit_id:c.target.value||null})},React.createElement("option",{value:""},"Common Area"),B.map(c=>React.createElement("option",{key:c.id,value:c.id},c.unit_number))))),React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Location"),React.createElement(t.Control,{value:n.location||"",onChange:c=>h({...n,location:c.target.value}),placeholder:"Kitchen, Lobby..."})))),React.createElement(t.Group,null,React.createElement(t.Label,null,"Priority"),React.createElement(t.Control,{as:"select",value:n.priority||"normal",onChange:c=>h({...n,priority:c.target.value})},React.createElement("option",null,"low"),React.createElement("option",null,"normal"),React.createElement("option",null,"high"),React.createElement("option",null,"emergency")))),React.createElement(s.Footer,null,React.createElement(a,{variant:"secondary",onClick:()=>C(!1)},"Cancel"),React.createElement(a,{onClick:o},"Submit"))))}function FinancesPage(){const{Card:i,Table:m,Button:a,Row:s,Col:t,Form:p}=ReactBootstrap,[e,f]=React.useState([]),[y,B]=React.useState(new Date().getMonth()+1),[F,g]=React.useState(new Date().getFullYear()),C=()=>api.get("/api/finances/maintenance-charges").then(f);React.useEffect(()=>{C()},[]);const n=()=>{api.post("/api/finances/maintenance-charges/generate",{period_month:y,period_year:F}).then(C)},h=d=>{api.put(`/api/finances/maintenance-charges/${d}`,{status:"paid",paid_date:new Date().toISOString().slice(0,10)}).then(C)},l=e.filter(d=>d.status==="pending").reduce((d,v)=>d+parseFloat(v.amount),0),r=e.filter(d=>d.status==="paid").reduce((d,v)=>d+parseFloat(v.amount),0);return React.createElement("div",null,React.createElement("h4",{className:"mb-3"},"Finances"),React.createElement(s,{className:"mb-4"},React.createElement(t,{md:4},React.createElement(i,{className:"stat-card"},React.createElement(i.Body,null,React.createElement("div",{className:"stat-number text-warning"},"$",l.toLocaleString()),React.createElement("div",{className:"stat-label"},"Pending")))),React.createElement(t,{md:4},React.createElement(i,{className:"stat-card"},React.createElement(i.Body,null,React.createElement("div",{className:"stat-number text-success"},"$",r.toLocaleString()),React.createElement("div",{className:"stat-label"},"Collected")))),React.createElement(t,{md:4},React.createElement(i,{className:"stat-card"},React.createElement(i.Body,null,React.createElement("div",{className:"d-flex align-items-end"},React.createElement(p.Control,{type:"number",size:"sm",value:y,onChange:d=>B(parseInt(d.target.value)),min:1,max:12,className:"mr-1",style:{width:60}}),React.createElement(p.Control,{type:"number",size:"sm",value:F,onChange:d=>g(parseInt(d.target.value)),className:"mr-1",style:{width:80}}),React.createElement(a,{size:"sm",onClick:n},"Generate")),React.createElement("div",{className:"stat-label mt-1"},"Generate Monthly Charges"))))),React.createElement(i,{className:"table-card"},React.createElement(i.Header,null,"Maintenance Charges"),React.createElement(m,{hover:!0,responsive:!0},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Unit"),React.createElement("th",null,"Period"),React.createElement("th",null,"Amount"),React.createElement("th",null,"Status"),React.createElement("th",null))),React.createElement("tbody",null,e.slice(0,50).map(d=>React.createElement("tr",{key:d.id},React.createElement("td",null,d.unit_number),React.createElement("td",null,d.period_month,"/",d.period_year),React.createElement("td",null,"$",parseFloat(d.amount).toLocaleString()),React.createElement("td",null,React.createElement(StatusBadge,{status:d.status})),React.createElement("td",null,d.status==="pending"&&React.createElement(a,{size:"sm",variant:"outline-success",onClick:()=>h(d.id)},"Mark Paid"))))))))}function StaffPage(){const{Card:i,Table:m,Row:a,Col:s,Button:t,Modal:p,Form:e}=ReactBootstrap,[f,y]=React.useState([]),[B,F]=React.useState([]),[g,C]=React.useState(!1),[n,h]=React.useState(!1),[l,r]=React.useState({}),[d,v]=React.useState({}),o=()=>{api.get("/api/staff").then(y),api.get("/api/vendors").then(F)};React.useEffect(()=>{o()},[]);const N=()=>{api.post("/api/staff",l).then(()=>{C(!1),r({}),o()})},c=()=>{api.post("/api/vendors",d).then(()=>{h(!1),v({}),o()})};return React.createElement("div",null,React.createElement("h4",{className:"mb-3"},"Staff & Vendors"),React.createElement(a,null,React.createElement(s,{md:6},React.createElement("div",{className:"d-flex justify-content-between mb-2"},React.createElement("h5",null,"Building Staff"),React.createElement(t,{size:"sm",onClick:()=>C(!0)},React.createElement("i",{className:"fas fa-plus mr-1"}),"Add")),React.createElement(i,{className:"table-card"},React.createElement(m,{hover:!0,responsive:!0},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Name"),React.createElement("th",null,"Role"),React.createElement("th",null,"Phone"),React.createElement("th",null,"Schedule"))),React.createElement("tbody",null,f.map(b=>React.createElement("tr",{key:b.id},React.createElement("td",null,React.createElement("strong",null,b.name)),React.createElement("td",null,b.role),React.createElement("td",null,b.phone),React.createElement("td",null,b.schedule))))))),React.createElement(s,{md:6},React.createElement("div",{className:"d-flex justify-content-between mb-2"},React.createElement("h5",null,"Vendors"),React.createElement(t,{size:"sm",onClick:()=>h(!0)},React.createElement("i",{className:"fas fa-plus mr-1"}),"Add")),React.createElement(i,{className:"table-card"},React.createElement(m,{hover:!0,responsive:!0},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Company"),React.createElement("th",null,"Trade"),React.createElement("th",null,"Contact"),React.createElement("th",null,"Phone"))),React.createElement("tbody",null,B.map(b=>React.createElement("tr",{key:b.id},React.createElement("td",null,React.createElement("strong",null,b.company_name)),React.createElement("td",null,b.trade),React.createElement("td",null,b.contact_name),React.createElement("td",null,b.phone)))))))),React.createElement(p,{show:g,onHide:()=>C(!1)},React.createElement(p.Header,{closeButton:!0},React.createElement(p.Title,null,"Add Staff")),React.createElement(p.Body,null,React.createElement(e.Group,null,React.createElement(e.Label,null,"Name"),React.createElement(e.Control,{value:l.name||"",onChange:b=>r({...l,name:b.target.value})})),React.createElement(e.Group,null,React.createElement(e.Label,null,"Role"),React.createElement(e.Control,{value:l.role||"",onChange:b=>r({...l,role:b.target.value})})),React.createElement(a,null,React.createElement(s,null,React.createElement(e.Group,null,React.createElement(e.Label,null,"Phone"),React.createElement(e.Control,{value:l.phone||"",onChange:b=>r({...l,phone:b.target.value})}))),React.createElement(s,null,React.createElement(e.Group,null,React.createElement(e.Label,null,"Schedule"),React.createElement(e.Control,{value:l.schedule||"",onChange:b=>r({...l,schedule:b.target.value})}))))),React.createElement(p.Footer,null,React.createElement(t,{variant:"secondary",onClick:()=>C(!1)},"Cancel"),React.createElement(t,{onClick:N},"Save"))),React.createElement(p,{show:n,onHide:()=>h(!1)},React.createElement(p.Header,{closeButton:!0},React.createElement(p.Title,null,"Add Vendor")),React.createElement(p.Body,null,React.createElement(e.Group,null,React.createElement(e.Label,null,"Company"),React.createElement(e.Control,{value:d.company_name||"",onChange:b=>v({...d,company_name:b.target.value})})),React.createElement(a,null,React.createElement(s,null,React.createElement(e.Group,null,React.createElement(e.Label,null,"Trade"),React.createElement(e.Control,{value:d.trade||"",onChange:b=>v({...d,trade:b.target.value})}))),React.createElement(s,null,React.createElement(e.Group,null,React.createElement(e.Label,null,"Contact"),React.createElement(e.Control,{value:d.contact_name||"",onChange:b=>v({...d,contact_name:b.target.value})})))),React.createElement(a,null,React.createElement(s,null,React.createElement(e.Group,null,React.createElement(e.Label,null,"Phone"),React.createElement(e.Control,{value:d.phone||"",onChange:b=>v({...d,phone:b.target.value})}))),React.createElement(s,null,React.createElement(e.Group,null,React.createElement(e.Label,null,"Email"),React.createElement(e.Control,{value:d.email||"",onChange:b=>v({...d,email:b.target.value})}))))),React.createElement(p.Footer,null,React.createElement(t,{variant:"secondary",onClick:()=>h(!1)},"Cancel"),React.createElement(t,{onClick:c},"Save"))))}function ApplicationsPage(){const{Card:i,Table:m,Button:a,Modal:s,Form:t,Row:p,Col:e,Badge:f}=ReactBootstrap,[y,B]=React.useState([]),[F,g]=React.useState([]),[C,n]=React.useState(!1),[h,l]=React.useState({}),r=()=>{api.get("/api/applications").then(B),api.get("/api/units").then(g)};React.useEffect(()=>{r()},[]);const d=()=>{api.post("/api/applications",h).then(()=>{n(!1),l({}),r()})},v=(o,N,c)=>{const b={status:N,reviewed_at:new Date().toISOString()};c&&(b.board_decision=c),api.put(`/api/applications/${o}`,b).then(r)};return React.createElement("div",null,React.createElement("div",{className:"d-flex justify-content-between mb-3"},React.createElement("h4",null,"Applications"),React.createElement(a,{size:"sm",onClick:()=>n(!0)},React.createElement("i",{className:"fas fa-plus mr-1"})," New Application")),React.createElement(i,{className:"table-card"},React.createElement(m,{hover:!0,responsive:!0},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Applicant"),React.createElement("th",null,"Unit"),React.createElement("th",null,"Type"),React.createElement("th",null,"Status"),React.createElement("th",null,"Submitted"),React.createElement("th",null,"Actions"))),React.createElement("tbody",null,y.map(o=>React.createElement("tr",{key:o.id},React.createElement("td",null,React.createElement("strong",null,o.applicant_name),React.createElement("br",null),React.createElement("small",null,o.applicant_email)),React.createElement("td",null,o.unit_number),React.createElement("td",null,React.createElement(f,{variant:"info"},o.type)),React.createElement("td",null,React.createElement(StatusBadge,{status:o.status})),React.createElement("td",null,new Date(o.submitted_at).toLocaleDateString()),React.createElement("td",null,o.status==="submitted"&&React.createElement(a,{size:"sm",variant:"outline-primary",className:"mr-1",onClick:()=>v(o.id,"under_review")},"Review"),o.status==="under_review"&&React.createElement(React.Fragment,null,React.createElement(a,{size:"sm",variant:"outline-success",className:"mr-1",onClick:()=>v(o.id,"approved","approved")},"Approve"),React.createElement(a,{size:"sm",variant:"outline-danger",onClick:()=>v(o.id,"denied","denied")},"Deny")))))))),React.createElement(s,{show:C,onHide:()=>n(!1)},React.createElement(s.Header,{closeButton:!0},React.createElement(s.Title,null,"New Application")),React.createElement(s.Body,null,React.createElement(p,null,React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Applicant Name"),React.createElement(t.Control,{value:h.applicant_name||"",onChange:o=>l({...h,applicant_name:o.target.value})}))),React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Email"),React.createElement(t.Control,{value:h.applicant_email||"",onChange:o=>l({...h,applicant_email:o.target.value})})))),React.createElement(p,null,React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Unit"),React.createElement(t.Control,{as:"select",value:h.unit_id||"",onChange:o=>l({...h,unit_id:o.target.value})},React.createElement("option",{value:""},"Select..."),F.map(o=>React.createElement("option",{key:o.id,value:o.id},o.unit_number))))),React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Type"),React.createElement(t.Control,{as:"select",value:h.type||"purchase",onChange:o=>l({...h,type:o.target.value})},React.createElement("option",null,"purchase"),React.createElement("option",null,"sublet"),React.createElement("option",null,"alteration"))))),React.createElement(t.Group,null,React.createElement(t.Label,null,"Notes"),React.createElement(t.Control,{as:"textarea",rows:2,value:h.notes||"",onChange:o=>l({...h,notes:o.target.value})}))),React.createElement(s.Footer,null,React.createElement(a,{variant:"secondary",onClick:()=>n(!1)},"Cancel"),React.createElement(a,{onClick:d},"Submit"))))}function CompliancePage(){const{Card:i,Table:m,Button:a,Modal:s,Form:t,Row:p,Col:e,Badge:f}=ReactBootstrap,[y,B]=React.useState([]),[F,g]=React.useState([]),[C,n]=React.useState(!1),[h,l]=React.useState(!1),[r,d]=React.useState({}),[v,o]=React.useState({}),N=()=>{api.get("/api/compliance").then(B),api.get("/api/compliance/violations").then(g)};React.useEffect(()=>{N()},[]);const c=()=>{api.post("/api/compliance",r).then(()=>{n(!1),d({}),N()})},b=()=>{api.post("/api/compliance/violations",v).then(()=>{l(!1),o({}),N()})},S=(u,R)=>api.put(`/api/compliance/${u}`,{status:R}).then(N),L=(u,R)=>api.put(`/api/compliance/violations/${u}`,{status:R}).then(N);return React.createElement("div",null,React.createElement("h4",{className:"mb-3"},"Compliance & Violations"),React.createElement(p,null,React.createElement(e,{md:7},React.createElement("div",{className:"d-flex justify-content-between mb-2"},React.createElement("h5",null,"Compliance Calendar"),React.createElement(a,{size:"sm",onClick:()=>n(!0)},React.createElement("i",{className:"fas fa-plus mr-1"}),"Add")),React.createElement(i,{className:"table-card mb-3"},React.createElement(m,{hover:!0,responsive:!0},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Law/Requirement"),React.createElement("th",null,"Due Date"),React.createElement("th",null,"Status"),React.createElement("th",null,"Cost"),React.createElement("th",null))),React.createElement("tbody",null,y.map(u=>React.createElement("tr",{key:u.id},React.createElement("td",null,React.createElement("strong",null,u.law_name),React.createElement("br",null),React.createElement("small",{className:"text-muted"},u.description?u.description.substring(0,80)+"...":"")),React.createElement("td",null,u.due_date?new Date(u.due_date).toLocaleDateString():"-"),React.createElement("td",null,React.createElement(StatusBadge,{status:u.status})),React.createElement("td",null,u.cost?`$${parseFloat(u.cost).toLocaleString()}`:"-"),React.createElement("td",null,u.status==="upcoming"&&React.createElement(a,{size:"sm",variant:"outline-primary",onClick:()=>S(u.id,"in_progress")},"Start"),u.status==="in_progress"&&React.createElement(a,{size:"sm",variant:"outline-success",onClick:()=>S(u.id,"completed")},"Complete")))))))),React.createElement(e,{md:5},React.createElement("div",{className:"d-flex justify-content-between mb-2"},React.createElement("h5",null,"Violations"),React.createElement(a,{size:"sm",onClick:()=>l(!0)},React.createElement("i",{className:"fas fa-plus mr-1"}),"Add")),React.createElement(i,{className:"table-card"},React.createElement(m,{hover:!0,responsive:!0},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Source"),React.createElement("th",null,"Description"),React.createElement("th",null,"Status"),React.createElement("th",null))),React.createElement("tbody",null,F.map(u=>React.createElement("tr",{key:u.id},React.createElement("td",null,React.createElement(f,{variant:"danger"},u.source),React.createElement("br",null),React.createElement("small",null,u.violation_number)),React.createElement("td",null,u.description?u.description.substring(0,60):""),React.createElement("td",null,React.createElement(StatusBadge,{status:u.status})),React.createElement("td",null,u.status==="open"&&React.createElement(a,{size:"sm",variant:"outline-warning",onClick:()=>L(u.id,"correcting")},"Fix"))))))))),React.createElement(s,{show:C,onHide:()=>n(!1)},React.createElement(s.Header,{closeButton:!0},React.createElement(s.Title,null,"Add Compliance Item")),React.createElement(s.Body,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Law / Requirement"),React.createElement(t.Control,{value:r.law_name||"",onChange:u=>d({...r,law_name:u.target.value})})),React.createElement(t.Group,null,React.createElement(t.Label,null,"Description"),React.createElement(t.Control,{as:"textarea",rows:2,value:r.description||"",onChange:u=>d({...r,description:u.target.value})})),React.createElement(p,null,React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Due Date"),React.createElement(t.Control,{type:"date",value:r.due_date||"",onChange:u=>d({...r,due_date:u.target.value})}))),React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Est. Cost"),React.createElement(t.Control,{type:"number",value:r.cost||"",onChange:u=>d({...r,cost:parseFloat(u.target.value)})}))))),React.createElement(s.Footer,null,React.createElement(a,{variant:"secondary",onClick:()=>n(!1)},"Cancel"),React.createElement(a,{onClick:c},"Save"))),React.createElement(s,{show:h,onHide:()=>l(!1)},React.createElement(s.Header,{closeButton:!0},React.createElement(s.Title,null,"Add Violation")),React.createElement(s.Body,null,React.createElement(p,null,React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Source"),React.createElement(t.Control,{as:"select",value:v.source||"HPD",onChange:u=>o({...v,source:u.target.value})},React.createElement("option",null,"HPD"),React.createElement("option",null,"DOB"),React.createElement("option",null,"FDNY"),React.createElement("option",null,"DEP")))),React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Violation #"),React.createElement(t.Control,{value:v.violation_number||"",onChange:u=>o({...v,violation_number:u.target.value})})))),React.createElement(t.Group,null,React.createElement(t.Label,null,"Description"),React.createElement(t.Control,{as:"textarea",rows:2,value:v.description||"",onChange:u=>o({...v,description:u.target.value})})),React.createElement(p,null,React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Issued Date"),React.createElement(t.Control,{type:"date",value:v.issued_date||"",onChange:u=>o({...v,issued_date:u.target.value})}))),React.createElement(e,null,React.createElement(t.Group,null,React.createElement(t.Label,null,"Penalty $"),React.createElement(t.Control,{type:"number",value:v.penalty||"",onChange:u=>o({...v,penalty:parseFloat(u.target.value)})}))))),React.createElement(s.Footer,null,React.createElement(a,{variant:"secondary",onClick:()=>l(!1)},"Cancel"),React.createElement(a,{onClick:b},"Save"))))}function App(){const{Navbar:i,Container:m,Row:a,Col:s}=ReactBootstrap,[t,p]=React.useState("dashboard"),f={dashboard:DashboardPage,units:UnitsPage,residents:ResidentsPage,board:BoardPage,announcements:AnnouncementsPage,maintenance:MaintenancePage,finances:FinancesPage,staff:StaffPage,applications:ApplicationsPage,compliance:CompliancePage}[t]||DashboardPage;return React.createElement("div",null,React.createElement(i,{bg:"dark",variant:"dark",expand:"lg"},React.createElement(i.Brand,{href:"#",onClick:()=>p("dashboard")},React.createElement("i",{className:"fas fa-home mr-2"}),"Apty"),React.createElement(i.Text,{className:"ml-auto text-light"},"Co-op Building Management")),React.createElement(m,{fluid:!0,className:"p-0"},React.createElement(a,{noGutters:!0},React.createElement(s,{md:2},React.createElement(Sidebar,{page:t,setPage:p})),React.createElement(s,{md:10,className:"main-content"},React.createElement(f,null)))))}ReactDOM.render(React.createElement(App,null),document.getElementById("root"));
